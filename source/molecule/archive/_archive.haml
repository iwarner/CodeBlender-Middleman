-##
-# Blog archive
-# Shows the years and month and number of blogs in each
-#
-# @usage
-# -# Blog archive
-# = codeBlender "archive", "molecule", { name: cp.blogName }
-#
-# @category molecule
-# @author   Ian Warner <ian.warner@drykiss.com>
-##

-# Blog name
- name = locals[ :name ] ? locals[ :name ] : blog_controller.name

-# Blog archive
%section.blogArchive

    -# Heading - H4
    = codeBlender "heading", "molecule", { tag: "h4", text: "Archive" }

    -# Unstyled list
    %ul.list-unstyled

        -# Loop through site blog posts
        - blog( name ).articles.group_by { | y | y.date.year }.each do | year, articles |

            -# List
            %li

                -# Link to the blog post via year
                = link_to year, blog_year_path( year, name )

                -# Loop through the articles by month
                - articles.group_by { | a | a.date.month }.each do | month, monthArticles |

                    -# List
                    %ul

                        -# List
                        %li

                            -# Link via month
                            = link_to monthArticles.first.date.strftime( "%b" ), blog_month_path( year, month, name )

                            -# Badge
                            = codeBlender "badge", "atom", { content: monthArticles.size }
