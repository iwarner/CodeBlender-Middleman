-##
-# Portfolio recent
-#
-# @usage
-# -# Portfolio recent
-# = codeBlender "portfolio-recent", "template/portfolio", { total: 4 }
-#
-# @locals
-# @param heading - Heading
-# @param total   - How many columns of items to display.
-#
-# @author   Ian Warner <ian.warner@drykiss.com>
-# @category template
-##

-# Portfolio recent
%section.portfolio.portfolio__recent

    -# Bootstrap row
    .row

        -# Bootstrap column
        .col-md-12.col-sm-12

            -# Blockquote
            = codeBlender "blockquote", "atom", t( :"portfolio.recent.heading" )

    -# Bootstrap row
    .row

        -# Column count
        - total      = locals[ :total ] ? locals[ :total ] : 3
        - count      = 12 / total
        - extraClass = "col-md-#{ count } "

        -# Loop through the portfolio category finding the first X articles
        -# Sorting is done by date as a default
        - blog( "portfolio" ).articles.first( total ).each_with_index do | article, index |

            -# Bootstrap column
            .portfolio__segment{ class: extraClass }

                -# Link to portfolio article
                %a{ href: article.url, title: article.title }

                    -# Image
                    = codeBlender "image", "atom", { alt: article.title, caption: article.title, extraClass: "img-thumbnail", src: article.data.image }
