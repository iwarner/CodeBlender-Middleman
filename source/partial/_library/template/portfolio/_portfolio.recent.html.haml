-##
-# Portfolio Recent
-# Shows the latest 3 portfolio entries from the Portfolio blog
-# Useful as a home page block
-#
-# @usage
-# -# Portfolio Recent
-# = partial "./template/portfolio/recent", locals: { total: "3" }
-#
-# @locals
-# @param heading - Heading
-# @param total   - How many columns of items to display.
-#
-# @author Ian Warner <ian.warner@drykiss.com>
-#
-# @todo Find a way to include the language elements from this module also
-# @todo Sort out the design of the blockquote caption and thumbnail image
-# @todo Use the link_to feature for the link section
-##

-# Portfolio
%section.portfolio.portfolio__recent

    -# Bootstrap Container
    .container

        -# Bootstrap Row
        .row

            -# Bootstrap Columns
            .col-md-12.col-sm-12

                -# Blockquote
                = partial "./atom/blockquote/blockquote", locals: t( :"portfolio.recent.heading" )

        -# Bootstrap Row
        .row

            -# Columns count
            - total      = locals[ :total ] ? locals[ :total ] : 3
            - count      = 12 / total
            - extraClass = "col-md-#{ count } "

            -# Loop through the Portfolio Category finding the first 3
            -# Sorting is done by date as a default
            - blog( 'portfolio' ).articles.first( total ).each_with_index do | portfolio, index |

                -# Bootstrap Columns
                .portfolio__segment{ class: extraClass }

                    -# Link to Portfolio
                    %a{ href: portfolio.url, title: portfolio.data.heading.title }

                        -# Image
                        = partial "./atom/image/image",
                                   locals: { alt:        portfolio.data.heading.title,
                                             caption:    portfolio.data.heading.title,
                                             extraClass: "img-thumbnail",
                                             src:        "#{ portfolio.data.meta.image }" }