-##
-# Blog Archive
-# Shows the years and month and number of blogs in each
-#
-# @usage
-#Â -# Blog Archive
-# = partial "./molecule/archive/archive"
-#
-# @category molecule
-# @author   Ian Warner <ian.warner@drykiss.com>
-#
-# @todo Make the list expandable and each year
-# @tdo  Should use the DT partial for this
-##

%section.blogArchive

    -# Heading
    = partial "./molecule/heading/heading", locals: { extraClass: "heading--noMargin", tag: "h4", text: "Archive" }

    -# Unstyled list
    %ul.list-unstyled

        -# Loop through Site Blog Posts
        -  blog.articles.group_by { | y | y.date.year }.each do | year, articles |

            -# List
            %li

                -# Link to the Blog post Via Year
                = link_to year, blog_year_path( year )

                -# Loop through the articles by Month
                - articles.group_by { | a | a.date.month }.each do | month, monthArticles |

                    -# List
                    %ul

                        -# List
                        %li

                            -# Link Via Month
                            = link_to monthArticles.first.date.strftime( "%b" ), blog_month_path( year, month )

                            -# Badge
                            = partial "./atom/badge/badge", locals: { content: monthArticles.size }