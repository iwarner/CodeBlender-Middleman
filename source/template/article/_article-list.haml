-##
-# Article list
-#
-# Rules
-# - Images are taken from the meta image element. It can then be used by social media also
-#   - Defaults to 250px wide and is responsive
-#
-# @usage
-# -# Article list
-# = partial "template/article/article-list.haml", locals: { page_articles: page_articles }
-#
-# @param  page_articles | Need to pass in the paginated pages 'page_articles'
-#
-# @category template
-# @author   Ian Warner <ian.warner@drykiss.com>
-##

-# Article list
%section.blogArticleList{ itemscope: true, itemtype: "http://schema.org/Blog" }

    -# Loop through a list of paginated articles
    - page_articles.each_with_index do | article, i |

        -# Variables
        - data    = article.data
        - meta    = article.data.meta
        - heading = data.heading

        -# Article - blog posting
        %article{ role: "article", itemprop: "blogPost", itemscope: true, itemtype: "http://schema.org/BlogPosting"  }

            -# Media
            .media

                -# Media left
                .media-left

                    -# Check article has associated image
                    - if ! meta.image.blank?

                        -# Link - no follow
                        %a{ href: article.url, rel: "nofollow" }

                            -# Image
                            = partial "atom/image/image.haml", locals: { alt: article.title, extraClass: "media-object img-thumbnail img-responsive", size: [ 250 ], src: meta.image }

                -# Media body
                .media-body

                    -# Heading - article H1
                    = partial "molecule/heading/heading.haml", locals: { extraClass: "heading--truncate media-heading", href: article.url, small: heading.small, text: heading.title, rel: "nofollow bookmark", itemprop: "name" }

                    -# Blog detail footer
                    = partial "molecule/detail/detail.haml", locals: { author: true, cal: true, comment: false, more: true, social: true, tags: true, current_page: article }

                    -# Excerpt
                    %p{ itemprop: "description" }= string data.excerpt

                    -# Button - read more
                    %nav= partial "atom/button/button.haml", locals: { context: "primary", text: "Read More", extraClass: "pull-right", href: article.url, itemprop: "url" }